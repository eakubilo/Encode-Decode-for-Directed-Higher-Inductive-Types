\documentclass[main.tex]{subfiles}

\begin{document}
For discrete types A and B, we seek to make an identification between morphisms $\ho[\uc]{A}{B}$ and functions $A \to B$. Just as we do so in informal HoTT, we can make such an identification by defining some canonical function:

\begin{lemma}
\label{lem:can_define_htf}
For any two discrete types $A$ and $B$, there is a function
\begin{equation}
    \htf : \ho[\uc]{A}{B} \to (A \to B).
\end{equation}

\end{lemma}
\begin{proof}
    We begin by observing that the identity function on $\uc$, \begin{equation}
    \label{eqn:zetaisucovid}
        \id{\uc} : \uc \to \uc
    \end{equation}
    is covariant, so by Lemma~\ref{lem:covcodiscov} the type family $$C \defeq \lam{B : \uc}A \to \id{\uc}(B) : \uc \to \U$$
    is also covariant. Note that \eqref{eqn:zetaisucovid} can be restated as $C \equiv \lam{B : \uc} A \to B$. Finally, we appeal to the Yoneda lemma to define $\htf$:
    $$\htf \defeq  \yon{C}{A}(\id{A})(B) \defeq \lam{f}f_*(\id{A}) : \ho[\uc]{A}{B} \to (A \to B) $$
\end{proof}
\begin{remark}
    Note that $\htf$ acts functorially, as for any $f : \ho[\uc]{A}{B}$ and $g : \ho[\uc]{B}{C}$,
    \begin{align*}
        \htf(g \cdot f) \equiv\\
        (g\cdot f)_*(\id{A}) =\\
        g_*(f_*(\id{A}))
    \end{align*}
with the second equality following from Proposition 8.16. 

\end{remark}
Just as HoTT does not come equipped with tools to show idtoeqv is an equivalence, sHoTT also does not come equipped with the tools to show {\htf} is an equivalence. Instead, we can postulate \textit{directed univalence} as an axiom.

\begin{axiom}[Directed Univalence]
    For any discrete types $A,B : \uc$, the function defined in Lemma~\ref{lem:can_define_htf} is an equivalence.
\end{axiom}

For discrete types $A$ and $B$, we can break the equivalence up into:
\begin{itemize}
    \item An introduction rule for $\ho[\uc]{A}{B}$ denoted $\dua$ for "directed univalence axiom":
    $$\dua : (A \to B) \to (\ho[\uc]{A}{B})$$
    \item An elimination rule
    $$\htf \defeq \yon{C}{A}(\id{A}) : \ho[\uc]{A}{B} \to (A \to B)$$
    \item The propositional computation rule
        $$\htf(\dua(f)) = f$$
    \item The propositional uniqueness rule, which states for any $f : \ho[\uc]{A} {B}$,
    $$f = \dua(\htf(f))$$
\end{itemize}
Directed univalence also allows us to  identify identity morphisms with identity functions and composition of morphisms in $\uc$ with composition of functions, stated tersely as
\begin{align*}
    \idhom{A} = \dua(\id{A})\\
    \dua{g}\cdot\dua{f} = \dua(g \circ f).
\end{align*}
The first equality from the fact that $\id{A} = (\idhom{A})_*(\id{A}) \equiv \htf(\idhom{A})$ by proposition 8.16. To show the second, if we define $p \defeq \dua(f)$ and $q \defeq \dua(g)$, then
    $$\dua(g \circ f) = \dua(\htf(p) \circ \htf(q)) = \dua(\htf(p \cdot q)) = p \cdot q$$
This allows us to state a result analogous to~\ref{lem:compissquare}:
\begin{lemma}
    For any two covariant families $F, G : A \to \U$, a morphism $h : \ho[A]{x}{y}$ and maps $f : F(x) \to G(x)$, and $g : F(y) \to G(y)$ we have the following:
    \begin{equation*}
        \ho[(\lam{x}F(x)\to G(x))h]{f}{q} \simeq g \circ h_* = h_*  \circ f
    \end{equation*}
\end{lemma}
\begin{proof}
    By directed univalence,
    \begin{equation*}
        \ho[(\lam{x}F(x)\to G(x))h]{f}{q} \simeq
        \ho[{(\lam{x}\ho[\uc]{F(x)}{G(x)})h}]{\dua f}{\dua g}
    \end{equation*}
    By lemma~\ref{lem:compissquare}, this is equivalent to
    \begin{equation*}
        \dua g \cdot \dua h_* = \dua h_* \cdot \dua f
    \end{equation*}
    which, by lemma~\ref{lem:equivissurjemb} and the functorality of $\htf$, is equivalent to the type
    \begin{equation*}
        g \circ h_* = h_*  \circ f
    \end{equation*}
\end{proof}
Finally, the directed univalence even extends to characterizing dependent functions as morphisms in $\uc$.
\begin{lemma}
    For any type family $P : A \to \uc$, for all $x : A$ and $Q : \tilde{P} \to \uc$, there is an equivalence

    $$\prd{p : P(x)} Q(x,p) \simeq \sm{f : \ho[\uc]{P(x)}{\sm{p : P(x)} Q(x,p)}} \dua(\fst) \circ f = \idhom{P(x)}, $$
    where $\fst : \sm{p : P(x)}Q(x,p) \to P(x)$
\end{lemma}
\begin{proof}
    \label{lem:covdomcovcodisinner}
    We begin by noting the following equivalences
    \begin{align*}
        \sm{f : \ho[\uc]{P(x)}{\sm{p : P(x)} Q(x,p)}} \dua(\fst) \circ f = \idhom{P(x)} \simeq \\
        \sm{f : P(x)\to \sm{p : P(x)} Q(x,p)}\dua(\fst) \circ \dua(f) = \idhom{P(x)}\simeq \\
        \sm{f : P(x)\to \sm{p : P(x)} Q(x,p)}\dua(\fst \circ f) = \idhom{P(x)}\simeq \\
        \sm{f : P(x)\to \sm{p : P(x)} Q(x,p)} \fst \circ f = \id{P(x)}
    \end{align*}
    with the first equivalence following from lemma~\ref{lem:equivbaseequivtot}. The second equivalence is a result of the functorality 
    of $\dua$ and lemmas~\ref{lem:compisequiv} and~\ref{lem:equivistotequiv}. The third equivalence comes from~\ref{lem:equivissurjemb}. Now that
    we are working with functions, we can reduce the types further:
    \begin{align*}
       \sm{f : P(x) \to \sm{p : P(x)}Q(x,p)}\fst \circ f = \id{P(x)} \simeq \\
       \sm{(f_1,f_2) : \sm{g : P(x) \to P(x)}\prd{p : P(x)}Q(x,g(p))}f_1 = \id{P(x)} \simeq\\
       \sm{f : P(x) \to P(x)}(\prd{p : P(x)}Q(x,f(p))) \times (f = \id{P(x)}) \simeq \\
       \sm{f : P(x) \to P(x)} (f = \id{P(x)})\times(\prd{p : P(x)}Q(x,f(p))) \simeq \\
       \sm{(f, p): \sm{g : P(x) \to P(x)} g = \id{P(x)}} \prd{p : P(x)}Q(x,f(p)) \simeq \\
       \prd{p : P(x)}Q(x,p)
    \end{align*}
    with the first equivalence following from lemma~\ref{lem:ttaoc}. The second follows from
    lemma~\ref{lem:sigisassoc}. The third follows from lemma~\ref{lem:sigissymm}. The fourth follows again from
    lemma~\ref{lem:sigisassoc}. The final equivalence follows from lemma~\ref{lem:contractiblesingletons} and lemma~\ref{lem:contractibleissimple}.
     Thus, we can get our desired equivalence by composing the two equivalences formed in this proof.
    \end{proof}



\end{document}
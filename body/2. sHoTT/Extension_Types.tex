\documentclass[main.tex]{subfiles}

\begin{document}
Extension types are an important us to have types that depend on shapes and \textit{cofibrations}. To say more, suppose we have two shapes
 $\phi$ and $\psi$ in the same cube such that $ t : I \,| \,\phi \vdash \psi$. We call this shape inclusion a cofibration. For 
 any type A that depends on $\psi$, and a term $a$ that depends on $\phi$. We then write 
\begin{equation}
    \label{eqn:extentype}
    \exten{t : I | \psi}{A}{\phi}{a}
\end{equation}
 and say \ref{eqn:extentype} is the type of extensions of $a$. An extension type encodes the following diagram:
\[\begin{tikzcd}
	&& A \\
	\\
	\phi && \psi
	\arrow[two heads, from=1-3, to=3-3]
	\arrow[from=3-1, to=1-3]
	\arrow[hook, from=3-1, to=3-3]
	\arrow[bend right = 30, from=3-3, to=1-3]
\end{tikzcd}\]
\begin{remark}
For readability purposes, we adopt the following conventions:
\begin{enumerate}
\item When $A$ does not depend on a shape, instead of $\exten{t : I | \psi}{A}{\phi}{a}$ we write $\ndexten{\preshape{t}{I}{\psi}}{A}{\phi}{a}$.
\item When $\phi$ is $\bot$, we observe that $a$ is $\recbot$, so instead of $\exten{\preshape{t}{I}{\psi}}{A}{\bot}{\recbot}$, we write $\prd{\preshape{t}{I}{\psi}}A$
\item We think of $A$ literally as a function $$A : \shape{t}{I}{\psi} \to \U$$ with a dependent function $a : \prd{\preshape{t}{I}{\phi}}A(t)$ and write 
$\exten{\preshape{t}{I}{\psi}}{A(t)}{\phi}{a}$.
\end{enumerate}
\end{remark}
The syntax of an extension type is not just suggestive. They are intended to be a specialization of dependent functions and as a
 result we can prove similar facts about extension types as we can about functions. To start, we know that the arguments of a 
 function commute. That is, 
\[
(X \to Y) \to Z \simeq Y \to (X \to Z)
\]
and
\[
\prd{x : X}\prd{y : Y}Z(x,y) \simeq \prd{y : Y}{x : X}Z(x,y).
\]
The commutativity of the arugments of an extension type also follow.
\begin{lemma}
    If $t : I \, \mid \, \phi \vdash \psi$ and $X : \U$, while $Y : \{t : I \, \mid \phi\} \to X \to \U$ and $f : \prd{t : I \, \mid\, \phi }{x : X}Y(t,x)$ then
    \[
    \exten{t : I \, \mid \, \psi }{\prd{x : X}Y(t,x)}{\phi}{f} \simeq \prd{x : X}\exten{t : I \, \mid \, \psi}{Y(t,x)}{\phi}{f}
    \]
\end{lemma}
Similarly, we can curry the arguments of a function. That is, there is an equivalence $$X \to Y \to Z \simeq (X \times Y) \to Z.$$
Extension types also behave similarly, allowing for currying and swapping in multiple argument functions.
\begin{lemma}
    \label{lem:exten_curry}
    If $t : I \mid \phi \vdash \psi$ and $s : J \mid \chi \vdash \zeta$, while
    \begin{equation*}
    X : \{ t : I \mid \psi\} \to \{ s : J \mid \zeta \} \to \U
    \end{equation*}
    and $f:\prd{\langle t,s \rangle : I \times J \mid (\phi \land \zeta) \lor (\psi \land \chi)}X(t,s),$ then
    \begin{align*}
        &\exten{t:I\mid\psi}{\exten{s : J \mid \zeta}{X(t,s)}{\chi}{\lam{s}f\langle t,s \rangle}}{\phi}{\lam{t}f\langle t,s \rangle} \\
        &\qquad\qquad\simeq \exten{\langle t,s \rangle : I \times J \mid \psi \land \zeta}{X(t,s)}{(\phi \land \zeta) \lor (\psi \land \chi)}{f} \\
        &\qquad\qquad\simeq \exten{s : J \mid \zeta}{\exten{t : I \mid \psi}{X(t,s)}{\phi}{\lam{s}f\langle t,s \rangle}}{\chi}{\lam{s}{t}f\langle t s \rangle}
    \end{align*}
\end{lemma}
\end{document}